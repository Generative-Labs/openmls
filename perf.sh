#! /bin/bash

cargo build --release --tests

sudo flamegraph -o perf/bulk_joins_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 bulk_joins_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
sudo flamegraph -o perf/bulk_joins_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 bulk_joins_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
sudo flamegraph -o perf/bulk_joins_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 bulk_joins_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
sudo flamegraph -o perf/multiple_joins_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 multiple_joins_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
sudo flamegraph -o perf/multiple_joins_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 multiple_joins_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
sudo flamegraph -o perf/multiple_joins_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 multiple_joins_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
sudo flamegraph -o perf/one_to_one_join_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 one_to_one_join_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
sudo flamegraph -o perf/one_to_one_join_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 one_to_one_join_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
sudo flamegraph -o perf/one_to_one_join_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 one_to_one_join_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
sudo flamegraph -o perf/remove_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 remove_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
sudo flamegraph -o perf/remove_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 remove_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
sudo flamegraph -o perf/remove_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 remove_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
sudo flamegraph -o perf/bulk_remove_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 bulk_remove_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
sudo flamegraph -o perf/bulk_remove_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 bulk_remove_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
sudo flamegraph -o perf/bulk_remove_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 bulk_remove_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
sudo flamegraph -o perf/three_party_join_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 three_party_join_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
sudo flamegraph -o perf/three_party_join_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 three_party_join_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
sudo flamegraph -o perf/three_party_join_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 three_party_join_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
sudo flamegraph -o perf/update_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 update_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
sudo flamegraph -o perf/update_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 update_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
sudo flamegraph -o perf/update_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 update_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
sudo flamegraph -o perf/remove_large_group_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 remove_large_group_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
sudo flamegraph -o perf/remove_large_group_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 remove_large_group_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
sudo flamegraph -o perf/remove_large_group_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 remove_large_group_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
sudo flamegraph -o perf/update_large_group_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 update_large_group_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
sudo flamegraph -o perf/update_large_group_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 update_large_group_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
sudo flamegraph -o perf/update_large_group_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 update_large_group_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
sudo flamegraph -o perf/large_group_lifecycle_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 large_group_lifecycle_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
sudo flamegraph -o perf/large_group_lifecycle_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 large_group_lifecycle_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
sudo flamegraph -o perf/large_group_lifecycle_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519.svg target/release/deps/test_interop_scenarios-dea755feb5ee1739 large_group_lifecycle_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519

# cargo test --release --test test_interop_scenarios bulk_joins_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios bulk_joins_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios bulk_joins_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
# cargo test --release --test test_interop_scenarios multiple_joins_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
# cargo test --release --test test_interop_scenarios multiple_joins_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios multiple_joins_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios one_to_one_join_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
# cargo test --release --test test_interop_scenarios one_to_one_join_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios one_to_one_join_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios remove_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
# cargo test --release --test test_interop_scenarios remove_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios remove_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios bulk_remove_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios bulk_remove_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios bulk_remove_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
# cargo test --release --test test_interop_scenarios three_party_join_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
# cargo test --release --test test_interop_scenarios three_party_join_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios three_party_join_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios update_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
# cargo test --release --test test_interop_scenarios update_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios update_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios remove_large_group_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios remove_large_group_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios remove_large_group_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
# cargo test --release --test test_interop_scenarios update_large_group_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios update_large_group_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios update_large_group_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
# cargo test --release --test test_interop_scenarios large_group_lifecycle_MLS10_128_DHKEMP256_AES128GCM_SHA256_P256
# cargo test --release --test test_interop_scenarios large_group_lifecycle_MLS10_128_DHKEMX25519_AES128GCM_SHA256_Ed25519
# cargo test --release --test test_interop_scenarios large_group_lifecycle_MLS10_128_DHKEMX25519_CHACHA20POLY1305_SHA256_Ed25519
